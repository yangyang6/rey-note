# Dubbo

长连接与短连接

* 长连接：每次通信结束不关闭连接，连接可以复用，保证了性能；缺点是连接需要统一管理，并且需要保活
* 短连接：每次通信结束关闭连接，下次通信需要重新创建连接；优点就是无需管理连接，无需保活连接





##### Dubbo设计角色

![img](https://images2015.cnblogs.com/blog/524341/201604/524341-20160414132910191-1796519559.jpg)

注册中心将基于长连接推送变更数据给消费者



##### Dubbo服务暴露的过程

提供者service到Invoker的转化









### 为什么需要保活

主要原因是因为网络不是100%可靠的，我们创建好的连接可能由于网络原因导致连接不可用

如果连接一直有消息往来，那么系统可以马上感知到连接断开；但是我们系统可能长时间没有消息来往，我们创建好的连接可能由于网络原因导致连接已经不可用，也就是不能及时处理重连





### dubbo支持的通信协议

* dubbo

  <strong>默认</strong>就是走dubbo协议，单一长连接，进行的NIO异步通信，基于hissian作为序列化协议，使用的场景是：传输数据量小（每次请求在100KB以内），但是并发量很高

* rmi

* hissian

* http

* webservice





### Java序列化与hissian序列化

hessian序列化快的原因是因为它的描述信息比java的少，他用简单的方式描述必要的信息。

采取键值对的方式，所以在序列化一些复杂对象上是有问题的。



##### 这里有个疑问就是如果我们要实现序列化操作，是否一定要通过实现Serializable接口的方式？

序列化有两个目的：

* 便于存储
* 便于传输





很有意思：

<strong>数据结构化</strong>和<strong>数据序列化</strong>两个名词





