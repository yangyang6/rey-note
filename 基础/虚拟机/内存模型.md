### JVM内存模型

* 虚拟机栈

​		每个线程有一个私有的栈，随着线程创建而创建。栈里面存着是一个叫“栈帧”的东西，每个方法会创建一个栈帧，栈帧中存放了局部变量表（基本数据类型和对象引用）、操作数栈、方法出口等信息。

​		小细节：StackOverflowError和OutOfMemoryError都不属于Exception的子类

* 本地方法栈

​		这部分主要与虚拟机用到的native方法相关

* PC寄存器（程序计数器）

​		JVM支持多个线程同时运行，每个线程都有自己的程序计数器。倘若当前执行是JVM的方法，则该寄存器中保存当前执行指令的地址；倘若执行是native方法，则PC寄存器中为空

* 堆

​		堆内存是JVM所有线程共享的部分，在虚拟机启动的时候就已经创建。所有的对象和数组都在堆上进行分配。这部分空间可通过GC进行回收

* 方法区

​		方法区也是所有线程共享。主要用于存储类的信息、常量池、方法数据、方法代码等。方法区逻辑上属于堆的一部分，但是为了和堆进行区分，通常又叫”非堆“。





### PermGen（永久代）

jdk1.7

字符串在永久代中，容易出现性能问题和内存溢出



### Metaspace（元空间）

元空间与永久代最大的区别在于：元空间并不在虚拟机中，而是使用本地内存